{% extends "home.html" %}
{% block content-area %}
{% load getattribute %}
{% url 'dashapp:create_wfdoc'  doctype as create_wfdoc %}


<div class="container-fluid" style="padding-top:7px">
  {% block page_heading %}
      <h3 style="text-align:center"> List of {{ doctype }} </h3>
  {% endblock page_heading %}
  
  {% block header_buttons %}
      <div class="row">
          <div class="col-sm-3">
              <a class="btn btn-primary btn-sm fa fa-plus" href="{{ create_wfdoc }}">
                   &nbsp Add {{ doctype }}
               </a>
          </div>
          <div class="col-sm-5 justify-content-center">     
          </div>
          <div class="col-sm-3 justify-content-end"  >
              <a class="btn  btn-sm fa fa-minus" href="{{ ldept }}"> &nbsp Delete All </a>
          </div>
      </div>
  {% endblock header_buttons %} 
  
  {% block table_data %}     
    <table class="table table-striped table-hover">
    {% block table_heading %}
      <thead >
          <tr style="background-color: #4CAF50;font-size:10px">
            {% block select_chkbox_heading %}{% endblock select_chkbox_heading %}
              <th>invoice num</th>
              <th>status</th>
              {% for field_name in docdata_fields %}
               <th>{{ field_name }}</th>
           {% endfor %}
           {% block draft_column_heading %}
              <th>draft</th>
           {% endblock draft_column_heading %}
           <th>edit</th>
           {% block delete_icon_header %}
              <th>delete</th>
           {% endblock delete_icon_header %}
          </tr>
      </thead>
    {% endblock table_heading %}
    
    {% block table_body %}
     <tbody>
         {% for object in object_list reversed %}
         {% with object.doc_data as docdata %}
         <tr style="font-size:10px">
            {% block select_chkbox %}{% endblock select_chkbox %}
             <td>{{ object.name }}</td>
             <td>{{ object.current_status }}</td>
             {% for field_name in docdata_fields %}
                 <td>{{ docdata|getattribute:field_name }}</td>
             {% endfor %}
             {% block draft_column_data %}
             <td>
                 {% for lrole in user_details.roles %}
                     {% for orole in object.has_draft_for_roles %}
                         {% if lrole == orole %}
                             <a class="fa fa-envelope-open" style="font-size:10px;color:blue"  href="{% url 'dashapp:update_from_draft' object.name  %}" ></a>
                         {% endif %}
                     {% endfor %}
                 {% endfor %}                            
             </td>
             {% endblock draft_column_data %}
             
             {% block edit_icon %}
             <td>
                 <a class="fa fa-edit" style="font-size:10px;color:red"  href="{% url 'dashapp:update_wfdoc' object.name  %}" ></a>               
             </td>
             {% endblock edit_icon %}
             {% block delete_icon %}
             <td>
                 <a class="fa fa-remove" style="font-size:10px;color:red"  href="{% url 'dashapp:delete_wfmobj' objname object.name  %}" ></a>               
             </td>
             {% endblock delete_icon %}
         </tr>
     {% endwith %}
     {% endfor %}
           
     </tbody>
      {% endblock table_body %}
    </table>
    {% endblock table_data %} 
    
    {% block result_display %}
    <p>{{ result }}</p>
    {% endblock result_display %}
</div>
    
{% endblock content-area %}


<!--  {'is_active': 'Y', 'otp_mode': 'mail', 'allowemaillogin': 'N', 
        'email': 'prasen.biswas@itc.in', 'created by': 'user1', 
        'wfc': {'is_active': 'Y', 'org': 'org1', 
                 'creation_date': '2019-07-04 15:03:08', 'created by': None, 'name': 'wfc1', 
                 'orgunit': 'ou1', 'id': 1, 'department': 'dept1'}, 
        'username': 'prasen', 'id': 6, 'roles': ['role1'], 'creation_date': '2019-07-08 12:55:16'} -->