{% extends "home.html" %}
{% block content-area %}
{% load getattribute %}
{% url 'dashapp:add_wfmobj'  objname as add_wfmobj %}
{% url 'dashapp:create_wfdoc'  'tspinvoice' as create_wfdoc %}


    <div class="container-fluid" style="padding-top:7px">
        <h3 style="text-align:center"> List of {{ doctype }} </h3>
        {% block add_delete_button %}
            <div class="row">
                <div class="col-sm-3">
                    <a class="btn btn-primary btn-sm fa fa-plus" href="{{ create_wfdoc }}">
                         &nbsp Add {{ doctype }}
                     </a>
                </div>
                <div class="col-sm-5 justify-content-center">     
                </div>
                <div class="col-sm-3 justify-content-end"  >
                    <a class="btn  btn-sm fa fa-minus" href="{{ ldept }}"> &nbsp Delete All </a>
                </div>
            </div>

        {% endblock add_delete_button %} 
               
        <table class="table table-striped table-hover">
            <thead >
                <tr style="background-color: #4CAF50;font-size:10px">
                    <th>invoice num</th>
                    <th>status</th>
                    {% for field_name in docdata_fields %}
	                    <th>{{ field_name }}</th>
	                {% endfor %}
	                <th>edit</th>
	                <th>delete</th>
                </tr>
            </thead>
            <tbody>
                {% for object in object_list reversed %}
                {% with object.doc_data as docdata %}
                    <tr style="font-size:10px">
                        <td>{{ object.name }}</td>
                        <td>{{ object.current_status }}</td>
                        {% for field_name in docdata_fields %}
                            <td>{{ docdata|getattribute:field_name }}</td>
                        {% endfor %}
                        <td>
                            <a class="fa fa-edit" style="font-size:10px;color:red"  href="{% url 'dashapp:update_wfdoc' object.name  %}" ></a>               
                        </td>
                        <td>
                            <a class="fa fa-remove" style="font-size:10px;color:red"  href="{% url 'dashapp:delete_wfmobj' objname object.name  %}" ></a>               
                        </td>
                    </tr>
                {% endwith %}
                {% endfor %}
                  
            </tbody>
        </table>
        <p>{{ result }}</p>
    </div>
    
{% endblock content-area %}


<!--  {'is_active': 'Y', 'otp_mode': 'mail', 'allowemaillogin': 'N', 
        'email': 'prasen.biswas@itc.in', 'created by': 'user1', 
        'wfc': {'is_active': 'Y', 'org': 'org1', 
                 'creation_date': '2019-07-04 15:03:08', 'created by': None, 'name': 'wfc1', 
                 'orgunit': 'ou1', 'id': 1, 'department': 'dept1'}, 
        'username': 'prasen', 'id': 6, 'roles': ['role1'], 'creation_date': '2019-07-08 12:55:16'} -->