{% load i18n %}
{% load l10n %}
{% load static %}

<div class="table-wrapper">
    <div class="table-title">
        <div class="row">
            <div class="col-sm-8"><h3>Invoice <b>Upload</b></h3></div>
        </div>
    </div>
    <br />
    {{UPLOAD_STATUS}}

    <table align="center" width="90%" style="padding-left: 150px">
        <tr>
            <td>
                {% if UPLOAD_RESULT is not null %}
                <div class="alert alert-success" role="alert">
                    Invoice file Upload operation completed. View the stauts below<br />
                </div>
                {% elif EXCEPTION is not null %}
                <div class="alert alert-danger" role="alert">
                    There is been an error while uploading a file, Please check the file format and server log. <br />
                    {% if EXCEPTION_INFO is not null %}
                    {{EXCEPTION_INFO}}
                    {% endif %}
                </div>
                {% endif %}
            </td>
        </tr>
    </table>


    <form method="post" class="md-form" enctype="multipart/form-data">
        {% csrf_token %}
        <!--<input type="file" name="myfile">
        <button type="submit">Upload</button>-->
        <div class="file-field" style="width:400px">
            <div class="btn btn-primary btn-sm float-left" style="width:400px">
                <span>Choose Invoice file </span>
                <input type="file" name="myfile" style="width:350px">
            </div><br /><br />
            <div class="file-path-wrapper" align="right">
                <input class="file-path validate" type="submit" value="upload" placeholder="Upload Invoice xl file" style="width:150px">
            </div>
        </div>
    </form>

    {%if UPLOAD_STATUS is not null%}
    <div class="table-wrapper">
        <div class="table-title">
            <div class="row">
                <div class="col-sm-8"><h3>Upload status</h3></div>
            </div>
        </div>
        <table id="tree-table" class="table table-hover table-bordepink">
            <thead>
                <tr style="font-size:12px">
                    <th>Invoice No</th>
                    <th>Upload status</th>




                </tr>
            </thead>
            <tbody>
                {% for s in UPLOAD_STATUS %}
                <tr data-id="{{ s.invoice_num}}" data-parent="0" data-level="1" style=" font-size:11px">
                    <td>{{ s.invoice_num }} </td>
                    <td> {{ s.save_status }}</td>
                </tr>
                <tr data-id="{{ s.invoice_num }}_autocheck" data-parent="{{ s.invoice_num}}" data-level="2" style=" font-size:11px">
                    <th>AutoCheck status</th>
                    <td> {{ s.invoice_json.autocheck_status }}</td>
                </tr>
                <tr data-id="{{ s.invoice_num }}_inventory" data-parent="{{ s.invoice_num}}" data-level="2" style=" font-size:11px">
                    <th>Inventory status</th>
                    <td> {{ s.invoice_json.inventory_status }}</td>
                </tr>
                <tr data-id="{{ s.invoice_num }}_lnet" data-parent="{{ s.invoice_num}}" data-level="2" style=" font-size:11px">
                    <th>Local N/W status</th>                    
                    <td> {{ s.invoice_json.lnet_status }}</td>
                </tr>
                <tr data-id="{{ s.invoice_num }}_bom" data-parent="{{ s.invoice_num}}" data-level="2" style=" font-size:11px">
                    <th>BOM Compare status</th>
                    <td> {{ s.invoice_json.bom_comp_result }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {%endif%}




    <script src='{% static "dashapp/styles/Bootstrapv337.js" %}' type="text/javascript"></script>
    <script src='{% static "dashapp/styles/jquery-1.12.4.min.js" %}' type="text/javascript"></script>
    <script src='{% static "dashapp/styles/javascript.js" %}' type="text/javascript"></script>
